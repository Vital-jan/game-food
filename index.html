<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="style.css">
	<title>Game</title>
</head>
<body>
	<div class="field" id='field'>
	</div>
	<!--<div class="stop-button" id="stop01">
		Stop
	</div>-->
<script>
// Глобальные переменные
var fps=30; // частота обновление, кадров/сек
var interval; // таймер
var xMax=400, yMax=400;  // размеры игрового поля
var spriteCount = 3; // к-во спрайтов
var spriteSize = 100; // размер спрайта в пикселах
var spriteIdPrefix = 'sprite';
var spriteImgFolder = 'img/'; // путь к папке с изображениями
var spriteImg = ['morkva1.png','kavun1.png','kavun2.png'];
var spriteTrue = [true,true,true];

function rnd(min, max) { // возвращает случайное целое число от min до max
	 return Math.floor(Math.random()*(max-min))+min;
}

function getRGB() { // возвращает случайный цвет в rgb-формате
	var r,g,b;
	r=rnd(0,255);
	g=rnd(0,255);
	b=rnd(0,255);
	return `rgb(${r},${g},${b})`;
}


// stop01.onclick=function () {
// 	clearInterval(interval);
// 	document.getElementById("stop01").style.backGroundColor='blue';
// }

// sprite.onclick=function() {
//  	// sprites[0].click();
// }
var sprite = {
	// x:0, y:0, // текущие координаты
	// dx:0, dy:0, // смещение (px/sec)
	// w:0, h:0, // ширина и высота элемента в пикселах
	// id:'', // идентификатор html
	// img:'', // путь к файлу изображения
	// exist: false, 
	// isTrue: false, // действие при нажатии (верно-неверно)
	init: function (id,w,h,x,y,dx,dy,img,isTrue) {
		this.x=x;
		this.y=y;
		this.dx=dx;
		this.dy=dy;
		this.w=w;
		this.h=h;
		this.id=id;
		this.exist=false;
		this.img = img;
		this.isTrue = isTrue;
		this.degree = rnd(0,359);
		this.move=function() {
			ddx=this.dx/fps;
    		ddy=this.dy/fps;
			this.x+=ddx;
			this.y+=ddy;
    		document.getElementById(this.id).style.top = Math.round(this.y)+'px';
			document.getElementById(this.id).style.left = Math.round(this.x)+'px';
			document.getElementById(this.id).style.transform = `rotate(${this.degree}deg)`;
			this.degree = this.degree<360 ? this.degree+1 : 0;
			if ( (this.x>=xMax-this.w)||(this.x<=0) ) this.dx=-this.dx;
			if ( (this.y>=yMax-this.h)||(this.y<=0) ) this.dy=-this.dy;
		};
		this.click = function () {
		this.dx+=rnd(0,50);
		this.dy+=rnd(0,50);
		this.degree=0;
	};
	}
}

// инициализация массива спрайтов ----------------------------
var sprites=[]; // массив спрайтов
var s = ''; // HTML массива спрайтов
for (n = 0; n < spriteCount; n++) {
	sprites.push(new sprite.init(`sprite${n}`,spriteSize,spriteSize,100*n,100*n,50,80,'',spriteTrue[n]));
	s += `<div class="sprite" id="sprite${n}"></div>`;
}

document.getElementById('field').innerHTML=s;

for (n = 0; n < spriteCount; n++) {
	document.getElementById(`${spriteIdPrefix}${n}`).style.backgroundImage = `url("${spriteImgFolder}${spriteImg[n]}")`;
	document.getElementById(`${spriteIdPrefix}${n}`).onclick=function(){
		var s=this.id.substr(spriteIdPrefix.length,this.id.length);
		s=+s;
		sprites[s].click();
	 }
}
//----------------------------------------

interval01=setInterval(function() {
	for (n = 0; n < spriteCount; n++) sprites[n].move();
},1000/fps);

</script>
</body>
</html>